!function e(r,t,a){function s(o,i){if(!t[o]){if(!r[o]){var u="function"==typeof require&&require;if(!i&&u)return u(o,!0);if(n)return n(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=t[o]={exports:{}};r[o][0].call(c.exports,function(e){var t=r[o][1][e];return s(t?t:e)},c,c.exports,e,r,t,a)}return t[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(e,r,t){(function(t){var a={CompressedTextureManager:e("./CompressedTextureManager.js"),compressedImageParser:e("./compressedImageParser.js"),extensionChooser:e("./extensionChooser.js"),extensionFixer:e("./extensionFixer.js"),detectExtensions:function(e){var r=[];if(e instanceof PIXI.WebGLRenderer){var t=e.plugins.compressedTextureManager.getSupportedExtensions();t.dxt&&r.push(".dds"),t.pvrtc&&r.push(".pvr"),t.atc&&r.push(".atc")}else e instanceof PIXI.CanvasRenderer;for(var a="@"+e.resolution+"x",s=r.slice(0);s.length>0;)r.push(a+s.pop());return r.push(a+".png"),r.push(a+".jpg"),r.push(a+".json"),r}};PIXI.loaders.Loader.addPixiMiddleware(a.compressedImageParser),PIXI.loaders.Loader.addPixiMiddleware(a.extensionFixer),PIXI.loader.use(a.compressedImageParser()),PIXI.loader.use(a.extensionFixer()),r.exports=t.PIXI.compressedTextures=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CompressedTextureManager.js":3,"./compressedImageParser.js":4,"./extensionChooser.js":5,"./extensionFixer.js":6}],2:[function(e,r,t){function a(e,r,t,a,s,n,o){this.src=e,this.width=a,this.height=s,this.data=r,this.type=t,this.levels=n,this.internalFormat=o,this.complete=!0,this.isCompressedImage=!0,this.dispose=function(){this.data=null},this.generateWebGLTexture=function(e,r){if(null==this.data)throw"Trying to create a second (or more) webgl texture from the same CompressedImage : "+this.src;for(var t=this.width,a=this.height,s=0,o=0;o<this.levels;++o){var i=u(this.internalFormat,t,a),d=new Uint8Array(this.data.buffer,this.data.byteOffset+s,i);e.compressedTexImage2D(e.TEXTURE_2D,o,this.internalFormat,t,a,0,d),t>>=1,1>t&&(t=1),a>>=1,1>a&&(a=1),s+=i}n>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r||(this.data=null)}}function s(e,r){var t=new Int32Array(e,0,g);if(t[I]!=x)throw"Invalid magic number in DDS header";if(!t[R]&T)throw"Unsupported format, must contain a FourCC code";var s,n=t[U];switch(n){case A:s=d;break;case b:s=c;break;case w:s=l;break;case y:s=p;break;case X:s=f;break;case M:s=h;break;default:throw"Unsupported FourCC code: "+i(n)}var o=1;t[C]&m&&(o=Math.max(1,t[P]));var u=t[v],L=t[_],F=t[E]+4,D=new Uint8Array(e,F);return new a(r,D,"DDS",u,L,o,s)}function n(e,r){var t=new Int32Array(e,0,H);if(t[K]!=Y)throw"Invalid magic number in PVR header";var s,n=t[z];switch(n){case B:s=F;break;case N:s=S;break;case O:s=L;break;case j:s=D;break;case G:s=k;break;case W:s=d;break;case V:s=c;break;case q:s=l;break;default:throw"Unsupported PVR format: "+n}var o=t[J],i=t[Z],u=t[Q],p=t[$]+52,f=new Uint8Array(e,p);return new a(r,f,"PVR",o,i,u,s)}function o(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function i(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function u(e,r,t){switch(e){case d:case p:case k:return(r+3>>2)*(t+3>>2)*8;case c:case l:case f:case h:return(r+3>>2)*(t+3>>2)*16;case L:case D:return Math.floor((Math.max(r,8)*Math.max(t,8)*4+7)/8);case F:case S:return Math.floor((Math.max(r,16)*Math.max(t,8)*2+7)/8);default:return 0}}r.exports=a,a.loadFromArrayBuffer=function(e,r){var t=new Uint8Array(e,0,3);if(t[0]=="DDS".charCodeAt(0)&&t[1]=="DDS".charCodeAt(1)&&t[2]=="DDS".charCodeAt(2))return s(e,r);if(t[0]=="PVR".charCodeAt(0)&&t[1]=="PVR".charCodeAt(1)&&t[2]=="PVR".charCodeAt(2))return n(e,r);throw"Compressed texture format is not recognized: "+r};var d=33776,c=33778,l=33779,p=35986,f=35987,h=34798,x=542327876,m=131072,T=4,g=31,I=0,E=1,C=2,_=3,v=4,P=7,R=20,U=21,A=o("DXT1"),b=o("DXT3"),w=o("DXT5"),y=o("ATC "),X=o("ATCA"),M=o("ATCI"),L=35840,F=35841,D=35842,S=35843,k=36196,B=0,N=1,O=2,j=3,G=6,W=7,V=9,q=5,H=13,Y=55727696,K=0,z=2,Z=6,J=7,Q=11,$=12},{}],3:[function(e,r,t){function a(e){o.call(this,e)}var s=PIXI,n=e("./CompressedImage"),o=s.WebGLManager;a.prototype=Object.create(o.prototype),a.prototype.constructor=a,r.exports=a,s.WebGLRenderer.registerPlugin("compressedTextureManager",a),a.prototype.getSupportedExtensions=function(){function e(e,r){var t=["","WEBKIT_","MOZ_"],a=null;for(var s in t)if(a=e.getExtension(t[s]+r))break;return a}var r=this.renderer.gl;return{dxt:e(r,"WEBGL_compressed_texture_s3tc"),pvrtc:e(r,"WEBGL_compressed_texture_pvrtc"),atc:e(r,"WEBGL_compressed_texture_atc")}},a.prototype.updateTexture=function(e,r){var t=this.renderer,a=this.renderer.gl,s=e.source;if(!(s instanceof n))throw"Not a compressed image";e._glTextures[a.id]||(e._glTextures[a.id]=a.createTexture(),e.on("dispose",t.destroyTexture,t)),a.bindTexture(a.TEXTURE_2D,e._glTextures[a.id]),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),s.generateWebGLTexture(a,!r)},a.prototype.updateAllCompressedTextures=function(e,r){for(var t in e){var a=e[t];a.isCompressedImage&&this.updateTexture(a.texture,r)}},a.prototype.updateAllTextures=function(e,r){for(var t in e){var a=e[t];a.isCompressedImage?this.updateTexture(a.texture.baseTexture,r):a.isImage&&this.renderer.updateTexture(a.texture.baseTexture)}}},{"./CompressedImage":2}],4:[function(e,r,t){function a(e){return e=e||[],function(e,r){if(e.isCompressedImage=!1,e.xhr&&e.xhrType===i.XHR_RESPONSE_TYPE.BUFFER&&(-1!=e.url.indexOf(".dds")||-1!=e.url.indexOf(".pvr"))){var t=o.loadFromArrayBuffer(e.data),a=new s.BaseTexture(t,null,s.utils.getResolutionOfUrl(e.url));a.imageUrl=e.url,e.texture=new PIXI.Texture(a),e.data=null,e.isCompressedImage=!0,n.BaseTextureCache[a.imageUrl]=a,n.TextureCache[a.imageUrl]=e.texture}r()}}var s=PIXI,n=s.utils,o=e("./CompressedImage"),i=s.loaders.Resource;i._xhrTypeMap.dds=i.XHR_RESPONSE_TYPE.BUFFER,i._xhrTypeMap.pvr=i.XHR_RESPONSE_TYPE.BUFFER,r.exports=a},{"./CompressedImage":2}],5:[function(e,r,t){function a(e){return e=e||[],function(r,t){var a=r.metadata.choice;if(!a)return t();var s=r.url;if(!r._defaultUrlChoice){r._defaultUrlChoice=s;var n=s.lastIndexOf(".");if(!(n>=0))return t();r._baseUrl=s.substring(0,n)}for(var o=a.length-1;o>=0;o--){s=r._baseUrl+a[o];for(var i=0;i<e.length;i++)if(a[o]===e[i])return r.url=s,r.loadType=r._determineLoadType(),t()}t()}}r.exports=a},{}],6:[function(e,r,t){function a(e){return function(e,r){if(e.texture&&e._defaultUrlChoice&&e._defaultUrl!=e.url){var t=e.texture,a=t.baseTexture;delete n.BaseTextureCache[a.imageUrl],delete n.TextureCache[a.imageUrl],a.imageUrl=e._defaultUrlChoice,s.utils.BaseTextureCache[a.imageUrl]=a,s.utils.TextureCache[a.imageUrl]=t}r()}}var s=PIXI,n=s.utils;e("./CompressedImage");r.exports=a},{"./CompressedImage":2}]},{},[1]);