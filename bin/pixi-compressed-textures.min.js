!function e(r,t,a){function s(n,i){if(!t[n]){if(!r[n]){var u="function"==typeof require&&require;if(!i&&u)return u(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var c=t[n]={exports:{}};r[n][0].call(c.exports,function(e){var t=r[n][1][e];return s(t?t:e)},c,c.exports,e,r,t,a)}return t[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}({1:[function(e,r,t){(function(t){var a={CompressedTextureManager:e("./CompressedTextureManager.js"),imageParser:e("./imageParser.js"),extensionChooser:e("./extensionChooser.js"),extensionFixer:e("./extensionFixer.js"),detectExtensions:function(e,r){var t=[];if(e instanceof PIXI.WebGLRenderer){var a=e.plugins.compressedTextureManager.getSupportedExtensions();a.dxt&&t.push(".dds"),a.pvrtc&&t.push(".pvr"),a.atc&&t.push(".atc")}else e instanceof PIXI.CanvasRenderer;r=r||e.resolution;for(var s="@"+r+"x",o=t.slice(0);o.length>0;)t.push(s+o.pop());return t.push(s+".png"),t.push(s+".jpg"),t.push(s+".json"),t.push(s+".atlas"),t}};PIXI.loaders.Loader.addPixiMiddleware(a.extensionFixer),PIXI.loader.use(a.extensionFixer()),r.exports=t.PIXI.compressedTextures=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CompressedTextureManager.js":3,"./extensionChooser.js":4,"./extensionFixer.js":5,"./imageParser.js":6}],2:[function(e,r,t){function a(e,r,t,s,o,n,i){a.prototype.init.apply(this,arguments)}function s(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function o(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function n(e,r,t){switch(e){case i:case c:case M:return(r+3>>2)*(t+3>>2)*8;case u:case d:case p:case l:return(r+3>>2)*(t+3>>2)*16;case D:case F:return Math.floor((Math.max(r,8)*Math.max(t,8)*4+7)/8);case X:case L:return Math.floor((Math.max(r,16)*Math.max(t,8)*2+7)/8);default:return 0}}r.exports=a,a.prototype.init=function(e,r,t,a,s,o,n){this.src=e,this.width=a,this.height=s,this.data=r,this.type=t,this.levels=o,this.internalFormat=n,this.isCompressedImage=!0;var i=this.complete;return this.complete=!!r,!i&&this.complete&&this.onload&&this.onload({target:this}),this},a.prototype.dispose=function(){this.data=null},a.prototype.generateWebGLTexture=function(e,r){if(null==this.data)throw"Trying to create a second (or more) webgl texture from the same CompressedImage : "+this.src;for(var t=this.width,a=this.height,s=this.levels,o=0,i=0;i<this.levels;++i){var u=n(this.internalFormat,t,a),d=new Uint8Array(this.data.buffer,this.data.byteOffset+o,u);e.compressedTexImage2D(e.TEXTURE_2D,i,this.internalFormat,t,a,0,d),t>>=1,1>t&&(t=1),a>>=1,1>a&&(a=1),o+=u}s>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r||(this.data=null)},a.loadFromArrayBuffer=function(e,r){return new a(r).loadFromArrayBuffer(e)},a.prototype.loadFromArrayBuffer=function(e){var r=new Uint8Array(e,0,3);if(r[0]=="DDS".charCodeAt(0)&&r[1]=="DDS".charCodeAt(1)&&r[2]=="DDS".charCodeAt(2))return this._loadDDS(e);if(r[0]=="PVR".charCodeAt(0)&&r[1]=="PVR".charCodeAt(1)&&r[2]=="PVR".charCodeAt(2))return this._loadPVR(e);throw"Compressed texture format is not recognized: "+src},a.prototype._loadDDS=function(e){var r=new Int32Array(e,0,x);if(r[T]!=f)throw"Invalid magic number in DDS header";if(!r[C]&m)throw"Unsupported format, must contain a FourCC code";var t,a=r[y];switch(a){case A:t=i;break;case P:t=u;break;case R:t=d;break;case b:t=c;break;case U:t=p;break;case w:t=l;break;default:throw"Unsupported FourCC code: "+o(a)}var s=1;r[v]&h&&(s=Math.max(1,r[_]));var n=r[I],D=r[E],X=r[g]+4,F=new Uint8Array(e,X);return this.init(this.src,F,"DDS",n,D,s,t)},a.prototype._loadPVR=function(e){var r=new Int32Array(e,0,V);if(r[H]!=q)throw"Invalid magic number in PVR header";var t,a=r[Y];switch(a){case S:t=X;break;case k:t=L;break;case B:t=D;break;case N:t=F;break;case j:t=M;break;case G:t=i;break;case O:t=u;break;case W:t=d;break;default:throw"Unsupported PVR format: "+a}var s=r[K],o=r[z],n=r[Z],c=r[J]+52,p=new Uint8Array(e,c);return this.init(this.src,p,"PVR",s,o,n,t)};var i=33776,u=33778,d=33779,c=35986,p=35987,l=34798,f=542327876,h=131072,m=4,x=31,T=0,g=1,v=2,E=3,I=4,_=7,C=20,y=21,A=s("DXT1"),P=s("DXT3"),R=s("DXT5"),b=s("ATC "),U=s("ATCA"),w=s("ATCI"),D=35840,X=35841,F=35842,L=35843,M=36196,S=0,k=1,B=2,N=3,j=6,G=7,O=9,W=5,V=13,q=55727696,H=0,Y=2,z=6,K=7,Z=11,J=12},{}],3:[function(e,r,t){function a(e){n.call(this,e)}var s=PIXI,o=e("./CompressedImage"),n=s.WebGLManager;a.prototype=Object.create(n.prototype),a.prototype.constructor=a,r.exports=a,s.WebGLRenderer.registerPlugin("compressedTextureManager",a),a.prototype.getSupportedExtensions=function(){function e(e,r){var t=["","WEBKIT_","MOZ_"],a=null;for(var s in t)if(a=e.getExtension(t[s]+r))break;return a}var r=this.renderer.gl;return{dxt:e(r,"WEBGL_compressed_texture_s3tc"),pvrtc:e(r,"WEBGL_compressed_texture_pvrtc"),atc:e(r,"WEBGL_compressed_texture_atc")}},a.prototype.updateTexture=function(e,r){var t=e.source;if(!(t instanceof o))throw"Not a compressed image";var a=this.renderer,s=this.renderer.gl;if(!t.complete)throw"Trying to update compressed texture that isnt loaded yet.";e._glTextures[s.id]||(e._glTextures[s.id]=s.createTexture(),e.on("dispose",a.destroyTexture,a)),s.bindTexture(s.TEXTURE_2D,e._glTextures[s.id]),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.generateWebGLTexture(s,!r)},a.prototype.updateAllCompressedTextures=function(e,r){for(var t in e){var a=e[t];a.isCompressedImage&&this.updateTexture(a.texture,r)}},a.prototype.updateAllTextures=function(e,r){for(var t in e){var a=e[t];a.isCompressedImage?this.updateTexture(a.texture.baseTexture,r):a.isImage&&this.renderer.updateTexture(a.texture.baseTexture)}}},{"./CompressedImage":2}],4:[function(e,r,t){function a(r){r=r||[];var t=e("./imageParser")();return function(e,a){var s=e.metadata.choice;if(!s)return a();var o=e.url;if(!e._defaultUrlChoice){e._defaultUrlChoice=o;var n=o.lastIndexOf(".");if(!(n>=0))return a();e._baseUrl=o.substring(0,n)}for(var i=s.length-1;i>=0;i--){o=e._baseUrl+s[i];for(var u=0;u<r.length;u++)if(s[i]===r[u])return e.url=o,e.loadType=e._determineLoadType(),t(e,a)}return t(e,a)}}r.exports=a},{"./imageParser":6}],5:[function(e,r,t){function a(e){return function(e,r){if(e.texture&&e._defaultUrlChoice&&e._defaultUrl!=e.url){var t=e.texture,a=t.baseTexture;delete o.BaseTextureCache[a.imageUrl],delete o.TextureCache[a.imageUrl],a.imageUrl=e._defaultUrlChoice,s.utils.BaseTextureCache[a.imageUrl]=a,s.utils.TextureCache[a.imageUrl]=t}r()}}var s=PIXI,o=s.utils;e("./CompressedImage");r.exports=a},{"./CompressedImage":2}],6:[function(e,r,t){function a(){return function(e,r){if(-1!=e.url.indexOf(".dds")||-1!=e.url.indexOf(".pvr")){var t=e.compressedImage||new o(e.url);if(e.data)throw"compressedImageParser middleware must be specified in loader.before() and must have zero resource.data";e.isCompressedImage=!0,e.data=t,e.once("complete",function(){e.isImage=!0,t.loadFromArrayBuffer(e.data),e.data=t})}r()}}var s=PIXI,o=(s.utils,e("./CompressedImage")),n=s.loaders.Resource;n.setExtensionXhrType("dds",n.XHR_RESPONSE_TYPE.BUFFER),n.setExtensionXhrType("pvr",n.XHR_RESPONSE_TYPE.BUFFER),r.exports=a},{"./CompressedImage":2}]},{},[1]);